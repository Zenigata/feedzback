<button mat-icon-button [matMenuTriggerFor]="actionsMenu" style="float: right">
  <mat-icon color="primary">more_vert</mat-icon>
</button>

<mat-menu #actionsMenu xPosition="before">
  <a mat-menu-item routerLink="/request" [queryParams]="{ recipient: getColleagueEmail(feedback) }">
    <mat-icon>live_help</mat-icon>Demander
  </a>

  @if (getColleagueEmail(feedback) | allowedEmailDomains) {
    <a mat-menu-item routerLink="/give" [queryParams]="{ receiverEmail: getColleagueEmail(feedback) }">
      <mat-icon>chat</mat-icon>Donner
    </a>
  }
</mat-menu>

<h1 class="gbl-page-title mat-h1">
  <mat-icon>forum</mat-icon>
  FeedZback
  @switch (type) {
    @case (feedbackType.given) {
      donné
    }
    @case (feedbackType.received) {
      reçu
    }
  }
</h1>

<div class="app-done-feedback-addons">
  <div class="app-done-feedback-addons__item"><mat-icon>calendar_today</mat-icon>{{ feedback.updatedAt | date }}</div>
  <div class="app-done-feedback-addons__item"><mat-icon>email</mat-icon>{{ getColleagueEmail(feedback) }}</div>
</div>

@if (feedback.message) {
  <div class="app-done-feedback-item">
    <h2 class="app-done-feedback-item__title"><mat-icon>send</mat-icon> Message</h2>
    <p class="app-done-feedback-item__content">{{ feedback.message }}</p>
  </div>
}

<div class="app-done-feedback-item">
  <h2 class="app-done-feedback-item__title"><mat-icon>new_releases</mat-icon> Points positifs</h2>
  <p class="app-done-feedback-item__content">{{ feedback.positive }}</p>
</div>

<div class="app-done-feedback-item">
  <h2 class="app-done-feedback-item__title"><mat-icon>moving</mat-icon> Axes d'améliorations</h2>
  <p class="app-done-feedback-item__content">{{ feedback.negative }}</p>
</div>

@if (feedback.comment) {
  <div class="app-done-feedback-item">
    <h2 class="app-done-feedback-item__title"><mat-icon>notes</mat-icon> Commentaires</h2>
    <p class="app-done-feedback-item__content">{{ feedback.comment }}</p>
  </div>
}

@if (feedback.shared) {
  <div class="app-done-feedback-addons">
    <div class="app-done-feedback-addons__item">
      <mat-icon>share</mat-icon>
      @if (type === feedbackType.received) {
        Ce feedZback est partagé avec votre manager
      } @else {
        Ce feedZback est partagé avec le manager de votre collègue
      }
    </div>
  </div>
}
